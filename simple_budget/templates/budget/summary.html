{% extends "base.html" %}
{% load templatetags %}

{% block content %}
    <svg class="chart"></svg>

    <table id="budget" class="table table-condensed table-striped table-bordered">
        <tr>
            <th style="width:17%">Date</th>
            <th style="width:14%">Income(£)</th>
            <th style="width:14%">Expense(£)</th>
            <th style="width:14%">Savings(£)</th>
            <th style="width:22%">Debt Repayment(£)</th>
            <th style="width:14%">Remaining(£)</th>
        </tr>
        <tbody>
            {% for key, spending in spending_by_budget_type.items %}
                <tr>
                    <td>
                        <a href="/budget/?date={{spending.date|date:"Y-m"}}">
                            {{spending.date|date:"F Y"}}
                        </a>
                    </td>
                    <td class="currency">
                        {{spending.previous_month_income|currency}}
                    </td>
                    <td class="currency">
                        {{spending.expense|currency}}
                    </td>
                    <td class="currency">
                        {{spending.savings|currency}}
                    </td>
                    <td class="currency">
                        {{spending.debt_repayment|currency}}
                    </td>
                    <td class="currency
                            {% if spending.total < 0 %}
                                warning
                            {% else %}
                                success{% endif %}">
                        {{spending.total|currency}}
                    </td>
                </tr>
            {%  endfor %}
            <tr>
                <td colspan="6" class="seperator">&nbsp;</td>
            </tr>
            <tr>
                <td><strong>Total</strong></td>
                <td class="currency">
                    <strong>
                        {{total_spending.previous_month_income|currency}}
                    </strong>
                </td>
                <td class="currency">
                    <strong>
                        {{total_spending.expense|currency}}
                    </strong>
                </td>
                <td class="currency">
                    <strong>
                        {{total_spending.savings|currency}}
                    </strong>
                </td>
                <td class="currency">
                    <strong>
                        {{total_spending.debt_repayment|currency}}
                    </strong>
                </td>
                <td class="currency
                            {% if total_spending.total < 0 %}
                                warning
                            {% else %}
                                success{% endif %}">
                    {{total_spending.total|currency}}
                </td>
            </tr>
            <tr>
                <td colspan="6" class="seperator">&nbsp;</td>
            </tr>
            <tr>
                <td><strong>Average</strong></td>
                <td class="currency">
                    <strong>
                        {{average_spending.previous_month_income|currency}}
                    </strong>
                </td>
                <td class="currency">
                    <strong>
                        {{average_spending.expense|currency}}
                    </strong>
                </td>
                <td class="currency">
                    <strong>
                        {{average_spending.savings|currency}}
                    </strong>
                </td>
                <td class="currency">
                    <strong>
                        {{average_spending.debt_repayment|currency}}
                    </strong>
                </td>
                <td class="currency
                            {% if total_spending.total < 0 %}
                                warning
                            {% else %}
                                success{% endif %}">
                    {{average_spending.total|currency}}
                </td>
            </tr>
            <tr>
                <td colspan="6" class="seperator">&nbsp;</td>
            </tr>
            <tr>
                <td colspan="6" class="notes">
                    *Income figures calculated using values from
                    previous month.
                </td>
            </tr>
        </tbody>
    </table>

{% endblock %}